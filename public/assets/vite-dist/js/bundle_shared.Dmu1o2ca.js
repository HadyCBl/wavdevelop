import{l as e}from"./chunk_datatables.CVkwJyTm.js";import{m as t}from"./chunk_alpine.D-O2uL2K.js";import{s as a}from"./chunk_vendors.BgDCcFUb.js";import"./chunk_jquery.Cg98Jr1F.js";function n(e,t,a){let n=[];function r(e,t){const a=e.nextElementSibling;a&&a.classList.contains("invalid-feedback")&&a.remove();const n=document.createElement("div");return n.className="invalid-feedback",n.innerHTML=`<i class="fas fa-exclamation-circle me-1"></i>${t}`,e.classList.add("is-invalid"),e.classList.remove("is-valid"),e.parentNode.insertBefore(n,e.nextSibling),t}function o(e){e.classList.remove("is-invalid"),e.classList.add("is-valid");const t=e.nextElementSibling;t&&t.classList.contains("invalid-feedback")&&t.remove()}return e.forEach((e=>{const t=document.getElementById(e);if(t){if(t.hasAttribute("required")&&(t.value.trim()?o(t):n.push(r(t,`El campo ${t.getAttribute("data-label")||e} es obligatorio`))),"email"===t.type&&t.value){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)||n.push(r(t,"Ingrese un email válido"))}if("number"===t.type&&t.value){const e=t.getAttribute("min"),a=t.getAttribute("max"),o=parseFloat(t.value);e&&o<parseFloat(e)&&n.push(r(t,`El valor mínimo es ${e}`)),a&&o>parseFloat(a)&&n.push(r(t,`El valor máximo es ${a}`))}}})),t.forEach((e=>{const t=document.getElementById(e);t&&t.hasAttribute("required")&&("0"===t.value||""===t.value?n.push(r(t,"Seleccione una opción")):o(t))})),a.forEach((e=>{const t=document.getElementsByName(e);if(t.length>0&&t[0].hasAttribute("required")){let e=!1;t.forEach((t=>{t.checked&&(e=!0)})),e?t.forEach((e=>o(e))):n.push(r(t[t.length-1],"Seleccione una opción"))}})),{esValido:0===n.length,errores:n}}function r(e,t){return(e.replace(/\/+$/,"")+(t.startsWith("/")?t:"/"+t)).replace(/([^:])\/\/+/g,"$1/")}a($),window.Alpine=t,t.start(),"undefined"!=typeof window&&(window.validarCamposGeneric=n,window.inicializarValidacionAutomaticaGeneric=function(e){const t=document.querySelector(e);t&&(t.addEventListener("keyup",(e=>{e.target.matches('input:not([type="radio"]), textarea')&&n([e.target.id],[],[])}),!0),t.addEventListener("change",(e=>{e.target.matches('input:not([type="radio"]), textarea')&&n([e.target.id],[],[]),e.target.matches("select")&&n([],[e.target.id],[]),e.target.matches('input[type="radio"]')&&n([],[],[e.target.name])})))},window.showHideElement=function(e,t,a=1){Array.isArray(e)||(e=[e]),e.forEach((e=>{const n=document.getElementById(e);n&&("show"===t?1===a?n.style.display="block":2===a?n.removeAttribute("hidden"):3===a&&n.classList.remove("d-none"):"hide"===t&&(1===a?n.style.display="none":2===a?n.setAttribute("hidden",""):3===a&&n.classList.add("d-none")))}))},window.convert_table_to_datatable=function(e,t={}){try{const a={lengthMenu:[[5,10,15,-1],["5 filas","10 filas","15 filas","Mostrar todos"]],mostrarBuscador:!0,mostrarInfo:!0,mostrarPaginacion:!0,pageLength:10,language:{lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron registros",info:" ",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de: _MAX_ registros)",sSearch:"Buscar: ",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},sProcessing:"Procesando..."},datatableOptions:{}},n={...a,...t,language:{...a.language,...t.language||{}}},r={lengthMenu:n.lengthMenu,pageLength:n.pageLength,language:n.language,searching:n.mostrarBuscador,info:n.mostrarInfo,paging:n.mostrarPaginacion,...n.datatableOptions};return $("#"+e).DataTable(r)}catch(a){return Swal.fire({icon:"error",title:"Error",text:"Ocurrió un error al cargar la tabla. Intente de nuevo."}),null}},window.initServerSideDataTable=function(t,a,n,r={}){const o={processing:!0,serverSide:!0,ajax:{url:"../../app/server_side/"+a+".php",type:r.ajaxMethod||"GET",error:function(e,t,a){r.onError&&"function"==typeof r.onError&&r.onError(e,t,a)}},columns:n,pageLength:r.pageLength||10,lengthMenu:r.lengthMenu||[[5,10,25,50,100],[5,10,25,50,100]],ordering:void 0===r.ordering||r.ordering,searching:void 0===r.searching||r.searching,language:e,dom:r.dom||'<"flex flex-col sm:flex-row justify-between items-center mb-4 gap-2"lf>rt<"flex flex-col sm:flex-row justify-between items-center mt-4 gap-2"ip>',order:r.order||[[0,"desc"]],headerCallback:function(e,t,a,n,o){const s="bg-base-300 text-base-content font-bold text-sm py-3 px-4 border-b-2 border-primary";$(e).find("th").each((function(e){$(this).addClass(s),r.headerClasses&&Array.isArray(r.headerClasses)&&r.headerClasses[e]&&($(this).removeClass(s),$(this).addClass(r.headerClasses[e]))})),r.onHeaderCallback&&"function"==typeof r.onHeaderCallback&&r.onHeaderCallback(e,t,a,n,o)},rowCallback:function(e,t,a){r.rowClasses&&Array.isArray(r.rowClasses)&&$(e).find("td").each((function(e){r.rowClasses[e]&&$(this).addClass(r.rowClasses[e])})),r.onRowCallback&&"function"==typeof r.onRowCallback&&r.onRowCallback(e,t,a)},drawCallback:function(e){r.onDrawCallback&&"function"==typeof r.onDrawCallback&&r.onDrawCallback(e)},...r};return $(t).DataTable(o)},window.getAlpineData=function(e,t){const a=document.querySelector(e);if(!a||!a._x_dataStack)return null;const n=a._x_dataStack[0];return t?n[t]:n},window.loadModuleView=function(e,t={}){const{route:a=null,method:n="GET",condi:o="",data:s={},csrfToken:i=null,onSuccess:l=null,onError:c=null}=t;loaderefect(1);const d={condi:o,...s},u={};if(i)u["X-CSRF-TOKEN"]=i;else{const e=document.querySelector('input[name="csrf_token"]');e&&e.value&&(u["X-CSRF-TOKEN"]=e.value)}$.ajax({url:r(BASE_URL_FOR_JS,a),method:n,data:d,headers:u,success:function(t){loaderefect(0);try{const a="string"==typeof t?JSON.parse(t):t;if(1!==a.status)throw new Error(a.message||"Error al cargar la vista");{const t=a.html||a.data||"";$(e).html(t),l&&"function"==typeof l&&l(a)}}catch(a){$(e).html(t),l&&"function"==typeof l&&l({html:t})}},error:function(e){loaderefect(0);let t="Error al cargar la vista";try{const a=JSON.parse(e.responseText);t=a.message||a.error||t,a.messagecontrol&&Swal.fire({icon:"error",title:"Error",html:a.messagecontrol,confirmButtonText:"Aceptar"})}catch(a){}Swal.fire({icon:"error",title:"Error",text:t,confirmButtonText:"Aceptar"}),c&&"function"==typeof c&&c(e)}})},window.initSelect2=function(e,t={}){const a={width:"100%",placeholder:"Seleccione una opción",allowClear:!0,language:{noResults:function(){return"No se encontraron resultados"},searching:function(){return"Buscando..."},loadingMore:function(){return"Cargando más resultados..."}},theme:"default",...t},n=$(e);return 0===n.length?null:(n.data("select2")&&n.select2("destroy"),n.select2(a),n)},window.refreshAllSelect2=function(){$(".select2-hidden-accessible").each((function(){const e=$(this),t=e.data("select2").options.options,a=e.val();e.select2("destroy"),e.select2(t),a&&e.val(a).trigger("change")}))});
